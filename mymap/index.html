<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      #mymap {
        width: 500px;
        height: 400px;
        margin: 50px auto;
      }
    </style>
  </head>
  <body>
    <div id="mymap"></div>

    <script
      type="text/javascript"
      src="http://api.map.baidu.com/api?v=3.0&ak=HsoHNgb25buXBRRKNhgC0SH7LlGkmQ4A"
    ></script>
    <script>
      // 百度地图API功能
      var map = new BMap.Map('mymap')
      var point = new BMap.Point(116.331398, 39.897445)
      map.centerAndZoom(point, 12)

      var p1 = new BMap.Point(114.396952, 22.728111)
      var p2 = null
      var geolocation = new BMap.Geolocation()
      geolocation.getCurrentPosition(
        function(r) {
          if (this.getStatus() == BMAP_STATUS_SUCCESS) {
            var mk = new BMap.Marker(r.point)
            map.addOverlay(mk)
            map.panTo(r.point)
            alert('您的位置：' + r.point.lng + ',' + r.point.lat)
          } else {
            alert('failed' + this.getStatus())
          }
          p2 = new BMap.Point(r.point.lng, r.point.lat)
          var driving = new BMap.DrivingRoute(map, {
            renderOptions: { map: map, autoViewport: true }
          })
          driving.search(p1, p2)
        },
        { enableHighAccuracy: true }
      )
    </script>
  </body>
</html>
